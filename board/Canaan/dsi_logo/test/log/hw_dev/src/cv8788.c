/* Copyright (c) 2022, Canaan Bright Sight Co., Ltd
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 1. Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
 * CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
#include "hw_dev/inc/dev_hw.h"
#include "hw_dev/inc/ext_ctl_hw.h"
/*
*
*/
unsigned int cv8788data[]=
{
    0x070000,
    0x080000,
    0x030000,
    0x040000,
    0x070080,
    0x0800f3,
    0x0c003a,
    0x0d0070,
    0x0e0040,
    0x0f0000,
    0x100000,
    0x110000,
    0x120000,
    0x130000,
    0x140000,
    0x1800ff,
    0x1900ff,
    0x1a0007,
    0x1b00ff,
    0x1c00ff,
    0x1d004f,
    0x1e0000,
    0x1f0004,
    0x290020,
    0x370000,
    0x3d0000,
    0x460002,
    0x4a0031,
    0x4b0000,
    0x4c00a2,
    0x4d0000,
    0x1001c0,
    0x110120,
    0x120152,
    0x130102,
    0x14011f,
    0x150118,
    0x160102,
    0x170142,
    0x1801f0,
    0x190100,
    0x800111,
    0x810104,
    0x820100,
    0x830100,
    0x8401f5,
    0x85014a,
    0x86010d,
    0x870100,
    0x8801c0,
    0x890100,
    0x8a0128,
    0x8b0100,
    0x8c0198,
    0x8d0108,
    0x8e0165,
    0x8f0104,
    0x90012c,
    0x910100,
    0x920105,
    0x930100,
    0x9401c0,
    0x950100,
    0x960140,
    0x970108,
    0x980129,
    0x990100,
    0x9a0161,
    0x9b0104,
    0x9c0100,
    0x9d0100,
    0x9e0100,
    0x9f0100,
    0xa00100,
    0xa10180,
    0xa20180,
    0xa30180,
    0xa40100,
    0xa50100,
    0xa60100,
    0xa70100,
    0xa80100,
    0xa90100,
    0xaa0100,
    0xab0100,
    0xac0100,
    0xad0100,
    0xb00100,
    0xc00107,
    0xc10100,
    0xc20100,
    0xc30110,
    0xc40111,
    0xc501e0,
    0xc60103,
    0xc70103,
    0xd00102,
    0xd10119,
    0xd20100,
    0xd30100,
    0xd40119,
    0xd50105,
    0xd60104,
    0xd70104,
    0xd80100,
    0xd90100,
    0xda0100,
    0xdb0101,
    0xdc0101,
    0xdd0101,
    0xe10100,
    0xe20101,
    0xe30100,
    0xe60100,
    0xe70100,
    0xe80100,
    0xe90101,
    0xea0184,
    0xeb010a,
    0xec0100,
    0xed0100,
    0xee0160,
    0xef0100,
    0xf00100,
    0xf10100,
    0xf20100,
    0xf30100,
    0xf40101,
    0xf50100,
    0xf60100,
    0xf80100,
    0xf90100,
    0xfa0110,
    0xfd0100,
    0x040200,
    0x050203,
    0x060200,
    0x0702cc,
    0x080254,
    0x0902a5,
    0x0a022a,
    0x100230,
    0x110284,
    0x120281,
    0x130200,
    0x140200,
    0x150252,
    0x160280,
    0x170288,
    0x180286,
    0x190268,
    0x1a0200,
    0x1b0200,
    0x1c0200,
    0x500280,
    0x510200,
    0x520200,
    0x530200,
    0x540200,
    0x550200,
    0xEE0100,
    0xEA0182,
    0xE90102,
    0xEB010D,
    0xED0183,
    0xED0112,
    0xED01b8,
    0xED0100,
    0xED0122,
    0xED0100,
    0xEE0140,
    0x1001C0,
    0x110120,
    0x120152,
    0x130102,
    0x14011F,
    0x150118,
    0x160102,
    0x170142,
    0x1801F0,
    0x190100,
    0x100230,
    0x150252,
    0x110284,
    0xEE0140,
    0xEA0184,
    0xE90101,
    0xEB010A,
    0xED0171,
    0xED0100,
    0xEE0160,
};
/*
*
*/
void cv8788Init(void)
{
#ifndef CANAAN_ISP
    Dev_config_apb25MHZ(0x01,0x3D,17);
#endif
    Active_Cv8788_rstn();
    sleep(2);
    Release_Cv8788_rstn();
    sleep(2);
    int i,addr,data;
    for(i=0;i<sizeof(cv8788data)/4;i++)
    {
        addr = cv8788data[i] >> 8;
        data = cv8788data[i] & 0xff;
        Cv8788I2cWr(addr,data);
       
        msleep(5);
    }        

    //read back test
    Cv8788I2cRd(0x0800);
    Cv8788I2cRd(0xEA01);
    Cv8788I2cRd(0xE901);
    Cv8788I2cRd(0xEB01);
    Cv8788I2cRd(0xED01);
    Cv8788I2cRd(0xEE01); 
}
/*
*
*/
void  cv8878_init(void)
{
	I2cWr(0x0700,0x00);
	msleep(1);
	I2cWr(0x0800,0x00);
	msleep(1);
	I2cWr(0x0300,0x00);
	msleep(1);
	I2cWr(0x0400,0x00);
	msleep(1);
	I2cWr(0x0700,0x80);
	msleep(1);
	I2cWr(0x0800,0xf3);
	msleep(1);
	I2cWr(0x0c00,0x3a);
	msleep(1);
	I2cWr(0x0d00,0x70);
	msleep(1);
	I2cWr(0x0e00,0x40);
	msleep(1);
	I2cWr(0x0f00,0x00);
	msleep(1);
	I2cWr(0x1000,0x00);
	msleep(1);
	I2cWr(0x1100,0x00);
	msleep(1);
	I2cWr(0x1200,0x00);
	msleep(1);
	I2cWr(0x1300,0x00);
	msleep(1);
	I2cWr(0x1400,0x00);
	msleep(1);
	I2cWr(0x1800,0xff);
	msleep(1);
	I2cWr(0x1900,0xff);
	msleep(1);
	I2cWr(0x1a00,0x07);
	msleep(1);
	I2cWr(0x1b00,0xff);
	msleep(1);
	I2cWr(0x1c00,0xff);
	msleep(1);
	I2cWr(0x1d00,0x4f);
	msleep(1);
	I2cWr(0x1e00,0x00);
	msleep(1);
	I2cWr(0x1f00,0x04);
	msleep(1);
	I2cWr(0x2900,0x20);
	msleep(1);
	I2cWr(0x3700,0x00);
	msleep(1);
	I2cWr(0x3d00,0x00);
	msleep(1);
	I2cWr(0x4600,0x02);
	msleep(1);
	I2cWr(0x4a00,0x31);
	msleep(1);
	I2cWr(0x4b00,0x00);
	msleep(1);
	I2cWr(0x4c00,0xa2);
	msleep(1);
	I2cWr(0x4d00,0x00);
	msleep(1);
	I2cWr(0x1001,0xc0);
	msleep(1);
	I2cWr(0x1101,0x20);
	msleep(1);
	I2cWr(0x1201,0x52);
	msleep(1);
	I2cWr(0x1301,0x02);
	msleep(1);
	I2cWr(0x1401,0x1f);
	msleep(1);
	I2cWr(0x1501,0x18);
	msleep(1);
	I2cWr(0x1601,0x02);
	msleep(1);
	I2cWr(0x1701,0x42);
	msleep(1);
	I2cWr(0x1801,0xf0);
	msleep(1);
	I2cWr(0x1901,0x00);
	msleep(1);
	I2cWr(0x8001,0x11);
	msleep(1);
	I2cWr(0x8101,0x04);
	msleep(1);
	I2cWr(0x8201,0x00);
	msleep(1);
	I2cWr(0x8301,0x00);
	msleep(1);
	I2cWr(0x8401,0xf5);
	msleep(1);
	I2cWr(0x8501,0x4a);
	msleep(1);
	I2cWr(0x8601,0x0d);
	msleep(1);
	I2cWr(0x8701,0x00);
	msleep(1);
	I2cWr(0x8801,0xc2);
	msleep(1);
	I2cWr(0x8901,0x00);
	msleep(1);
	I2cWr(0x8a01,0x28);
	msleep(1);
	I2cWr(0x8b01,0x00);
	msleep(1);
	I2cWr(0x8c01,0x98);
	msleep(1);
	I2cWr(0x8d01,0x08);
	msleep(1);
	I2cWr(0x8e01,0x65);
	msleep(1);
	I2cWr(0x8f01,0x04);
	msleep(1);
	I2cWr(0x9001,0x2c);
	msleep(1);
	I2cWr(0x9101,0x00);
	msleep(1);
	I2cWr(0x9201,0x05);
	msleep(1);
	I2cWr(0x9301,0x00);
	msleep(1);
	I2cWr(0x9401,0xc0);
	msleep(1);
	I2cWr(0x9501,0x00);
	msleep(1);
	I2cWr(0x9601,0x40);
	msleep(1);
	I2cWr(0x9701,0x08);
	msleep(1);
	I2cWr(0x9801,0x29);
	msleep(1);
	I2cWr(0x9901,0x00);
	msleep(1);
	I2cWr(0x9a01,0x61);
	msleep(1);
	I2cWr(0x9b01,0x04);
	msleep(1);
	I2cWr(0x9c01,0x00);
	msleep(1);
	I2cWr(0x9d01,0x00);
	msleep(1);
	I2cWr(0x9e01,0x00);
	msleep(1);
	I2cWr(0x9f01,0x00);
	msleep(1);
	I2cWr(0xa001,0x00);
	msleep(1);
	I2cWr(0xa101,0x80);
	msleep(1);
	I2cWr(0xa201,0x80);
	msleep(1);
	I2cWr(0xa301,0x80);
	msleep(1);
	I2cWr(0xa401,0x00);
	msleep(1);
	I2cWr(0xa501,0x00);
	msleep(1);
	I2cWr(0xa601,0x00);
	msleep(1);
	I2cWr(0xa701,0x00);
	msleep(1);
	I2cWr(0xa801,0x00);
	msleep(1);
	I2cWr(0xa901,0x00);
	msleep(1);
	I2cWr(0xaa01,0x00);
	msleep(1);
	I2cWr(0xab01,0x00);
	msleep(1);
	I2cWr(0xac01,0x00);
	msleep(1);
	I2cWr(0xad01,0x00);
	msleep(1);
	I2cWr(0xb001,0x00);
	msleep(1);
	I2cWr(0xc001,0x07);
	msleep(1);
	I2cWr(0xc101,0x00);
	msleep(1);
	I2cWr(0xc201,0x00);
	msleep(1);
	I2cWr(0xc301,0x10);
	msleep(1);
	I2cWr(0xc401,0x11);
	msleep(1);
	I2cWr(0xc501,0xe0);
	msleep(1);
	I2cWr(0xc601,0x03);
	msleep(1);
	I2cWr(0xc701,0x03);
	msleep(1);
	I2cWr(0xd001,0x02);
	msleep(1);
	I2cWr(0xd101,0x19);
	msleep(1);
	I2cWr(0xd201,0x00);
	msleep(1);
	I2cWr(0xd301,0x00);
	msleep(1);
	I2cWr(0xd401,0x19);
	msleep(1);
	I2cWr(0xd501,0x05);
	msleep(1);
	I2cWr(0xd601,0x04);
	msleep(1);
	I2cWr(0xd701,0x04);
	msleep(1);
	I2cWr(0xd801,0x00);
	msleep(1);
	I2cWr(0xd901,0x00);
	msleep(1);
	I2cWr(0xda01,0x00);
	msleep(1);
	I2cWr(0xdb01,0x01);
	msleep(1);
	I2cWr(0xdc01,0x01);
	msleep(1);
	I2cWr(0xdd01,0x01);
	msleep(1);
	I2cWr(0xe101,0x00);
	msleep(1);
	I2cWr(0xe201,0x01);
	msleep(1);
	I2cWr(0xe301,0x00);
	msleep(1);
	I2cWr(0xe601,0x00);
	msleep(1);
	I2cWr(0xe701,0x00);
	msleep(1);
	I2cWr(0xe801,0x00);
	msleep(1);
	I2cWr(0xe901,0x01);
	msleep(1);
	I2cWr(0xea01,0x84);
	msleep(1);
	I2cWr(0xeb01,0x0a);
	msleep(1);
	I2cWr(0xec01,0x00);
	msleep(1);
	I2cWr(0xed01,0x00);
	msleep(1);
	I2cWr(0xee01,0x60);
	 msleep(1);
	I2cWr(0xef01,0x00);
	 msleep(1);
	I2cWr(0xf001,0x00);
	 msleep(1);
	I2cWr(0xf101,0x00);
	 msleep(1);
	I2cWr(0xf201,0x00);
	 msleep(1);
	I2cWr(0xf301,0x00);
	 msleep(1);
	I2cWr(0xf401,0x01);
	 msleep(1);
	I2cWr(0xf501,0x00);
	 msleep(1);
	I2cWr(0xf601,0x00);
	 msleep(1);
	I2cWr(0xf801,0x00);
	 msleep(1);
	I2cWr(0xf901,0x00);
	 msleep(1);
	I2cWr(0xfa01,0x10);
	 msleep(1);
	I2cWr(0xfd01,0x00);
	 msleep(1);
	I2cWr(0x0402,0x00);
	 msleep(1);
	I2cWr(0x0502,0x03);
	 msleep(1);
	I2cWr(0x0602,0x00);
	 msleep(1);
	I2cWr(0x0702,0xcc);
	 msleep(1);
	I2cWr(0x0802,0x54);
	 msleep(1);
	I2cWr(0x0902,0xa5);
	 msleep(1);
	I2cWr(0x0a02,0x2a);
	 msleep(1);
	I2cWr(0x1002,0x30);
	 msleep(1);
	I2cWr(0x1102,0x84);
	 msleep(1);
	I2cWr(0x1202,0x81);
	 msleep(1);
	I2cWr(0x1302,0x00);
	 msleep(1);
	I2cWr(0x1402,0x00);
	 msleep(1);
	I2cWr(0x1502,0x52);
	 msleep(1);
	I2cWr(0x1602,0x80);
	 msleep(1);
	I2cWr(0x1702,0x88);
	 msleep(1);
	I2cWr(0x1802,0x86);
	 msleep(1);
	I2cWr(0x1902,0x68);
	 msleep(1);
	I2cWr(0x1a02,0x00);
	 msleep(1);
	I2cWr(0x1b02,0x00);
	 msleep(1);
	I2cWr(0x1c02,0x00);
	 msleep(1);
	I2cWr(0x5002,0x80);
	 msleep(1);
	I2cWr(0x5102,0x00);
	 msleep(1);
	I2cWr(0x5202,0x00);
	 msleep(1);
	I2cWr(0x5302,0x00);
	 msleep(1);
	I2cWr(0x5402,0x00);
	 msleep(1);
	I2cWr(0x5502,0x00);
	 msleep(1);
	I2cWr(0xEE01,0x00);
	 msleep(1);
	I2cWr(0xEA01,0x82);
	 msleep(1);
	I2cWr(0xE901,0x02);
	 msleep(1);
	I2cWr(0xEB01,0x0D);
	 msleep(1);
	I2cWr(0xED01,0x83);
	 msleep(1);
	I2cWr(0xED01,0x12);
	 msleep(1);
	I2cWr(0xED01,0xb8);
	 msleep(1);
	I2cWr(0xED01,0x00);
	 msleep(1);
	I2cWr(0xED01,0x22);
	 msleep(1);
	I2cWr(0xED01,0x00);
	 msleep(1);
	I2cWr(0xEE01,0x40);
	 msleep(1);
	I2cWr(0x1001,0xC0);
	 msleep(1);
	I2cWr(0x1101,0x20);
	 msleep(1);
	I2cWr(0x1201,0x52);
	 msleep(1);
	I2cWr(0x1301,0x02);
	 msleep(1);
	I2cWr(0x1401,0x1F);
	 msleep(1);
	I2cWr(0x1501,0x18);
	 msleep(1);
	I2cWr(0x1601,0x02);
	 msleep(1);
	I2cWr(0x1701,0x42);
	 msleep(1);
	I2cWr(0x1801,0xF0);
	 msleep(1);
	I2cWr(0x1901,0x00);
	 msleep(1);
	I2cWr(0x1002,0x30);
	 msleep(1);
	I2cWr(0x1502,0x52);
	 msleep(1);
	I2cWr(0x1102,0x84);
	 msleep(1);
	I2cWr(0xEE01,0x40);
	 msleep(1);
	I2cWr(0xEA01,0x84);
	 msleep(1);
	I2cWr(0xE901,0x01);
	 msleep(1);
	I2cWr(0xEB01,0x0A);
	 msleep(1);
	I2cWr(0xED01,0x71);
	 msleep(1);
	I2cWr(0xED01,0x00);
	 msleep(1);
	I2cWr(0xEE01,0x60);
	 msleep(1);
};